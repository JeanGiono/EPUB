/* ==========================================================================
   Base Design System
   ========================================================================== */
:root {
  /* Colors */
  --color-background: rgba(252, 252, 249, 1);
  --color-surface: rgba(255, 255, 253, 1);
  --color-text: rgba(19, 52, 59, 1);
  --color-text-secondary: rgba(98, 108, 113, 1);
  --color-primary: rgba(33, 128, 141, 1);
  --color-primary-hover: rgba(29, 116, 128, 1);
  --color-primary-active: rgba(26, 104, 115, 1);
  --color-secondary: rgba(94, 82, 64, 0.12);
  --color-secondary-hover: rgba(94, 82, 64, 0.2);
  --color-danger: rgba(192, 21, 47, 1);
  --color-danger-hover: rgba(172, 19, 42, 1);
  --color-border: rgba(94, 82, 64, 0.2);
  --color-btn-primary-text: rgba(252, 252, 249, 1);
  --color-focus-ring: rgba(33, 128, 141, 0.4);
  --color-holiday: rgba(192, 21, 47, 1);
  --color-sentry: rgba(168, 75, 47, 1);

  /* Typography */
  --font-family-base: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;

  /* Spacing */
  --space-8: 8px; --space-12: 12px; --space-16: 16px; --space-24: 24px;
  
  /* Border Radius */
  --radius-base: 8px; --radius-full: 9999px;

  /* Animation */
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

/* Dark Mode Theme */
[data-color-scheme="dark"] {
  --color-background: rgba(31, 33, 33, 1);
  --color-surface: rgba(38, 40, 40, 1);
  --color-text: rgba(245, 245, 245, 1);
  --color-text-secondary: rgba(167, 169, 169, 0.7);
  --color-primary: rgba(50, 184, 198, 1);
  --color-primary-hover: rgba(45, 166, 178, 1);
  --color-danger: rgba(255, 84, 89, 1);
  --color-danger-hover: rgba(229, 75, 80, 1);
  --color-secondary: rgba(119, 124, 124, 0.15);
  --color-secondary-hover: rgba(119, 124, 124, 0.25);
  --color-border: rgba(119, 124, 124, 0.3);
  --color-btn-primary-text: rgba(19, 52, 59, 1);
  --color-focus-ring: rgba(50, 184, 198, 0.4);
  --color-holiday: rgba(255, 84, 89, 1);
  --color-sentry: rgba(230, 129, 97, 1);
}

/* Base Styles */
html { font-family: var(--font-family-base); color: var(--color-text); }
body { margin: 0; background-color: var(--color-background); font-size: var(--font-size-base); }
*, *::before, *::after { box-sizing: border-box; }
.hidden { display: none !important; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
.mt-8 { margin-top: var(--space-8); }
.mt-16 { margin-top: var(--space-16); }
.mr-8 { margin-right: var(--space-8); }

/* ==========================================================================
   App Layout & Components
   ========================================================================== */
.app-container { display: grid; grid-template-rows: auto auto 1fr; grid-template-columns: 280px 1fr; grid-template-areas: "header header" "nav nav" "sidebar main"; height: 100vh; }
.header { grid-area: header; background-color: var(--color-surface); border-bottom: 1px solid var(--color-border); padding: var(--space-16) var(--space-24); display: flex; justify-content: space-between; align-items: center; }
.app-title { font-size: var(--font-size-2xl); font-weight: 600; margin: 0; }
.header-controls { display: flex; gap: var(--space-8); }
.nav-bar { grid-area: nav; background-color: var(--color-surface); border-bottom: 1px solid var(--color-border); padding: var(--space-12) var(--space-24); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--space-16); }
.nav-controls { display: flex; gap: var(--space-8); align-items: center; }
.current-date { font-size: var(--font-size-xl); font-weight: 500; margin: 0 var(--space-16); }
.view-controls { display: flex; }
.sidebar { grid-area: sidebar; background-color: var(--color-surface); border-right: 1px solid var(--color-border); padding: var(--space-24); overflow-y: auto; }
.sidebar-section { margin-bottom: var(--space-24); }
.sidebar-section h3 { font-size: var(--font-size-sm); font-weight: 600; color: var(--color-text-secondary); text-transform: uppercase; margin: 0 0 var(--space-12) 0; letter-spacing: 0.05em; }
.main-content { grid-area: main; padding: var(--space-24); overflow: auto; }

/* Buttons */
.btn { display: inline-flex; align-items: center; justify-content: center; padding: var(--space-8) var(--space-16); border-radius: var(--radius-base); font-size: var(--font-size-base); font-weight: 500; cursor: pointer; transition: all var(--duration-normal) var(--ease-standard); border: 1px solid transparent; text-decoration: none; }
.btn:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--color-focus-ring); }
.btn--primary { background: var(--color-primary); color: var(--color-btn-primary-text); }
.btn--primary:hover { background: var(--color-primary-hover); }
.btn--secondary { background: var(--color-secondary); color: var(--color-text); }
.btn--secondary:hover { background: var(--color-secondary-hover); }
.btn--outline { border-color: var(--color-border); }
.btn--outline:hover { background: var(--color-secondary); }
.btn--danger { background: var(--color-danger); color: var(--color-btn-primary-text); }
.btn--danger:hover { background: var(--color-danger-hover); }
.btn--full-width { width: 100%; }
.view-btn { border-radius: var(--radius-base) !important; }
.view-btn.active { background-color: var(--color-primary); color: var(--color-btn-primary-text); border-color: var(--color-primary); }
.theme-toggle, #settingsBtn { border-radius: var(--radius-full); width: 40px; height: 40px; padding: 0; }
i.fa-cog { font-size: var(--font-size-lg); }

/* Forms */
.form-group { margin-bottom: var(--space-16); }
.form-group label { display: block; font-weight: 500; margin-bottom: var(--space-8); font-size: var(--font-size-sm); }
.form-control { display: block; width: 100%; padding: var(--space-8) var(--space-12); font-size: var(--font-size-base); color: var(--color-text); background-color: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-base); transition: border-color .2s, box-shadow .2s; }
.form-control:focus { border-color: var(--color-primary); outline: 2px solid transparent; box-shadow: 0 0 0 3px var(--color-focus-ring); }
textarea.form-control { font-family: var(--font-family-base); resize: vertical; }
.form-hint { font-size: var(--font-size-sm); color: var(--color-text-secondary); margin-bottom: var(--space-12); }

/* ==========================================================================
   Shift Tool Specific Styles
   ========================================================================== */
/* Calendar */
.calendar-container { max-width: 100%; margin: 0 auto; background-color: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-base); overflow: hidden; }
.calendar-header { display: grid; grid-template-columns: repeat(7, 1fr); background-color: var(--color-secondary); }
.weekday { padding: var(--space-12); text-align: center; font-weight: 500; color: var(--color-text-secondary); }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); }
.calendar-cell { min-height: 120px; padding: var(--space-8); border-right: 1px solid var(--color-border); border-bottom: 1px solid var(--color-border); transition: background-color 0.2s; position: relative; display: flex; flex-direction: column; }
.calendar-cell:nth-child(7n) { border-right: none; }
.calendar-cell.primary-view:not(:empty):hover { background-color: var(--color-secondary-hover); cursor: pointer; }
.calendar-cell:empty { background-color: var(--color-background); }
.calendar-cell.today { box-shadow: inset 0 0 0 2px var(--color-primary); }
.calendar-cell.selected { background-color: var(--color-primary) !important; color: var(--color-btn-primary-text); }
.calendar-cell.keyboard-focus { box-shadow: inset 0 0 0 2px var(--color-primary); z-index: 10; }
.date-number { font-weight: 500; margin-bottom: var(--space-8); }
.date-number.weekend-holiday { color: var(--color-holiday); font-weight: 600; }
.cell-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px; text-align: center; }
.primary-shift { font-size: var(--font-size-lg); font-weight: 600; width: 32px; height: 32px; border-radius: var(--radius-full); display: inline-flex; justify-content: center; align-items: center; }
.secondary-shift { font-weight: 600; padding: 4px; border-radius: 4px; width: 100%; }
.sentry-note, .holiday-note { font-size: var(--font-size-sm); font-weight: 500; }
.sentry-note { color: var(--color-sentry); }
.holiday-note { color: var(--color-holiday); font-weight: 600; }

/* Sidebar */
.staff-list { max-height: 200px; overflow-y: auto; background: var(--color-background); border: 1px solid var(--color-border); border-radius: var(--radius-base); padding: var(--space-8); }
.staff-item { display: flex; justify-content: space-between; align-items: center; padding: var(--space-8); border-radius: 4px; }
.staff-item:hover { background-color: var(--color-secondary); }
.staff-color-indicator { width: 12px; height: 12px; border-radius: 3px; margin-right: var(--space-8); display: inline-block; vertical-align: middle; }
.remove-staff-btn { background: none; border: none; color: var(--color-danger); cursor: pointer; font-size: var(--font-size-lg); padding: 0 var(--space-8); opacity: 0.5; }
.staff-item:hover .remove-staff-btn { opacity: 1; }
.secondary-staff-info { font-size: var(--font-size-sm); background-color: var(--color-secondary); padding: var(--space-12); border-radius: var(--radius-base); }

/* Modal */
.modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 1000; opacity: 0; transition: opacity var(--duration-normal); }
.modal.active { display: flex; opacity: 1; }
.modal-content { background: var(--color-surface); border-radius: var(--radius-base); width: 90%; max-width: 450px; display: flex; flex-direction: column; max-height: 90vh; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
.modal-content.wide { max-width: 600px; }
.modal-header { display: flex; justify-content: space-between; align-items: center; padding: var(--space-16) var(--space-24); border-bottom: 1px solid var(--color-border); }
.modal-header h3 { margin: 0; font-size: var(--font-size-lg); }
.close-btn { background: none; border: none; font-size: var(--font-size-2xl); cursor: pointer; color: var(--color-text-secondary); line-height: 1; }
.modal-body { padding: var(--space-24); overflow-y: auto; }
.modal-footer { padding: var(--space-16) var(--space-24); border-top: 1px solid var(--color-border); display: flex; justify-content: flex-end; gap: var(--space-8); background-color: var(--color-background); border-bottom-left-radius: var(--radius-base); border-bottom-right-radius: var(--radius-base); }
.modal-staff-list button { display: flex; align-items: center; width: 100%; padding: var(--space-8); border-radius: var(--radius-base); background: none; border: none; text-align: left; cursor: pointer; font-size: var(--font-size-base); }
.modal-staff-list button:hover { background-color: var(--color-secondary); }
.modal-section { margin-bottom: var(--space-24); }
.modal-section:last-child { margin-bottom: 0; }
.modal-section h4 { font-size: var(--font-size-base); font-weight: 600; text-transform: uppercase; color: var(--color-text-secondary); margin-bottom: var(--space-16); padding-bottom: var(--space-8); border-bottom: 1px solid var(--color-border); }
.form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-16); align-items: end; }
.form-grid button { grid-column: 1 / -1; }

/* Custom Alert */
.custom-alert { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: var(--space-12) var(--space-16); border-radius: var(--radius-base); z-index: 1050; color: white; opacity: 0; transition: opacity 0.3s, transform 0.3s; pointer-events: none; box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translate(-50%, 10px); }
.custom-alert.show { opacity: 1; transform: translateX(-50%); }
.custom-alert.success { background-color: var(--color-primary); }
.custom-alert.error { background-color: var(--color-danger); }
.custom-alert.info { background-color: var(--color-text-secondary); }

/* Print Styles */
@media print {
    body { background-color: #fff; color: #000; }
    .app-container { display: block; }
    .header, .nav-bar, .sidebar, .modal, .custom-alert { display: none !important; }
    .main-content { padding: 0; }
    .calendar-container { border: none; }
    .calendar-cell { min-height: 90px; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    .primary-shift, .secondary-shift { color: #000 !important; }
}

/* Responsive */
@media (max-width: 768px) {
  .app-container { grid-template-columns: 1fr; grid-template-rows: auto auto auto 1fr; grid-template-areas: "header" "nav" "main"; }
  .sidebar { display: none; }
  .nav-bar { flex-direction: column; gap: var(--space-12); }
}