<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHIFT TOOL v7.0 (優化版)</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1 class="app-title">SHIFT TOOL v7.0</h1>
            <div class="header-controls">
                <button class="btn btn--secondary theme-toggle" id="themeToggle" aria-label="切換主題">🌙</button>
            </div>
        </header>

        <nav class="nav-bar">
            <div class="nav-controls">
                <button class="btn btn--outline nav-btn" id="prevMonthBtn">&lt;</button>
                <h2 class="current-date" id="monthYearDisplay"></h2>
                <button class="btn btn--outline nav-btn" id="nextMonthBtn">&gt;</button>
            </div>
            <div class="view-controls">
                <button class="btn btn--secondary view-btn active" id="primaryScheduleTab" data-view="primary">主要班表</button>
                <button class="btn btn--secondary view-btn" id="secondaryScheduleTab" data-view="secondary">第二班表 (週末)</button>
            </div>
        </nav>
        
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3>主要班表人員</h3>
                <div id="staffList" class="staff-list"></div>
                <form id="addStaffForm">
                    <input type="text" id="staffNameInput" class="form-control mt-8" placeholder="輸入姓名後按 Enter">
                    <button type="submit" class="btn btn--primary btn--full-width mt-8">新增人員</button>
                </form>
            </div>
            
            <div id="primaryViewControls" class="sidebar-section">
                <h3>篩選與匯出</h3>
                <select id="staffFilterSelect" class="form-control"></select>
                <button class="btn btn--outline btn--full-width mt-8" id="exportPrimaryScheduleBtn">匯出主要班表 (.ics)</button>
            </div>

            <div id="secondaryViewControls" class="sidebar-section hidden">
                <h3>組別資訊</h3>
                <div id="secondaryStaffInfo" class="secondary-staff-info"></div>
                <button class="btn btn--outline btn--full-width mt-8" id="exportSecondaryScheduleBtn">匯出第二班表 (.ics)</button>
            </div>

            <div class="sidebar-section">
                <h3>自動化功能</h3>
                <button class="btn btn--secondary btn--full-width mt-8" id="autoScheduleBtn">自動產生初步班表</button>
                <button class="btn btn--secondary btn--full-width mt-8" id="carryOverBtn">自動預排次月班表</button>
            </div>
            
            <div class="sidebar-section">
                <h3>資料管理</h3>
                <button class="btn btn--primary btn--full-width mt-8" id="saveAllBtn">儲存所有變更</button>
                <button class="btn btn--secondary btn--full-width mt-8" id="printBtn">友善列印本月班表</button>
                <button class="btn btn--danger btn--full-width mt-8" id="clearMonthBtn">清除本月主要班表</button>
            </div>
        </aside>

        <main class="main-content">
            <div class="calendar-container">
                <div class="calendar-header">
                    <div class="weekday">日</div><div class="weekday">一</div><div class="weekday">二</div>
                    <div class="weekday">三</div><div class="weekday">四</div><div class="weekday">五</div>
                    <div class="weekday">六</div>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </main>
    </div>

    <div class="modal" id="assignmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="assignmentModalTitle">指派主要班表</h3>
                <button class="close-btn" id="closeAssignmentModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="noStaffMessage" class="hidden">請先在側邊欄新增人員。</p>
                <div id="modalStaffList" class="modal-staff-list"></div>
            </div>
            <div class="modal-footer">
                <button id="clearAssignmentBtn" class="btn btn--danger">清除此日指派</button>
            </div>
        </div>
    </div>

    <div class="modal" id="confirmModal">
        <div class="modal-content">
             <div class="modal-header">
                <h3 id="confirmModalTitle"></h3>
                <button class="close-btn" id="closeConfirmModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmModalMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn--secondary" id="cancelConfirmBtn">取消</button>
                <button class="btn btn--primary" id="acceptConfirmBtn">確認</button>
            </div>
        </div>
    </div>
    
    <div id="customAlert" class="custom-alert"></div>

    <script src="app.js"></script>
</body>
</html>